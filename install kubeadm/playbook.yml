---

- name: Update repo cache before doing
  hosts: all
  become: true
  pre_tasks:

  - tags: always
    package:
      update_cache: yes
    changed_when: false

#- name: Install containerd on all hosts
#  hosts: all
#  become: true
#  roles:
#    - install_containerd

- name: Set hostname to all k8s hosts
  hosts: all
  become: true
  vars:
    host_vars_dir: "host_vars"
    host_vars_files: "{{ lookup('fileglob', host_vars_dir + '/*.yml') }}"
  vars_files:
    - "{{ host_vars_files }}"
  roles:
    - set_hostname